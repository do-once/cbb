{"version":3,"file":"copy.js","sourceRoot":"","sources":["../src/copy.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,MAAM,EAAE,MAAM,UAAU,CAAA;AAEjC;;;;;;GAMG;AACH,MAAM,UAAU,mBAAmB,CAAC,IAAY;IAC9C,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACrC,IAAI,OAAO,IAAI,KAAK,QAAQ;YAAE,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAA;QAEhE,IAAI,MAAM,GAAG,cAAc,CAAC,IAAI,CAAC,CAAA;QACjC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;QAEjC,2BAA2B;QAC3B,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;QAEnC,IAAI;YACF,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;SAC7B;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,MAAM,CAAC,GAAG,CAAC,CAAA;SACnB;QAED,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;QACjC,MAAM,GAAG,IAAsC,CAAA;QAE/C,OAAO,CAAC,YAAY,CAAC,CAAA;IACvB,CAAC,CAAC,CAAA;AACJ,CAAC;AAED;;;;GAIG;AACH,SAAS,cAAc,CAAC,IAAY;IAClC,MAAM,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,KAAK,CAAA;IAEpE,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAA;IAEjD,yBAAyB;IACzB,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAA;IAE9B,kBAAkB;IAClB,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,CAAA;IACzB,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAA;IAC1B,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,CAAA;IAEzB,0CAA0C;IAC1C,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAA;IAClC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,SAAS,CAAA;IAElD,+CAA+C;IAC/C,MAAM,SAAS,GAAG,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAA;IAC1E,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,SAAS,IAAI,CAAA;IAEnC,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,CAAA;IACnC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAA;IAEnB,OAAO,MAAM,CAAA;AACf,CAAC","sourcesContent":["/**\n * @author GuangHui\n * @description 拷贝文本到剪切板\n */\n\nimport { select } from './select'\n\n/**\n * 拷贝文本到剪切板中\n *\n * @export\n * @param {string} text 需要复制的文本\n * @returns\n */\nexport function copyTextToClipboard(text: string) {\n  return new Promise((resolve, reject) => {\n    if (typeof text !== 'string') throw new Error('text必须为string类型')\n\n    let fakeEl = _genFakeCopyEl(text)\n    document.body.appendChild(fakeEl)\n\n    // eslint-disable-next-line\n    const selectedText = select(fakeEl)\n\n    try {\n      document.execCommand('copy')\n    } catch (err) {\n      return reject(err)\n    }\n\n    document.body.removeChild(fakeEl)\n    fakeEl = null as unknown as HTMLTextAreaElement\n\n    resolve(selectedText)\n  })\n}\n\n/**\n * 生成辅助拷贝文本的textarea\n *\n * @param {String} text 需要拷贝的文本\n */\nfunction _genFakeCopyEl(text: string) {\n  const isRTL = document.documentElement.getAttribute('dir') === 'rtl'\n\n  const fakeEl = document.createElement('textarea')\n\n  // Prevent zooming on iOS\n  fakeEl.style.fontSize = '12pt'\n\n  // Reset box model\n  fakeEl.style.border = '0'\n  fakeEl.style.padding = '0'\n  fakeEl.style.margin = '0'\n\n  // Move element out of screen horizontally\n  fakeEl.style.position = 'absolute'\n  fakeEl.style[isRTL ? 'right' : 'left'] = '-9999px'\n\n  // Move element to the same position vertically\n  const yPosition = window.pageYOffset || document.documentElement.scrollTop\n  fakeEl.style.top = `${yPosition}px`\n\n  fakeEl.setAttribute('readonly', '')\n  fakeEl.value = text\n\n  return fakeEl\n}\n"]}