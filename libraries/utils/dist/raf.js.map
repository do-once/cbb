{"version":3,"file":"raf.js","sourceRoot":"","sources":["../src/raf.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,MAAM,OAAO,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAA;AACjC,IAAI,CAAC,GAAG,MAAM,CAAC,qBAAqB,CAAA;AACpC,IAAI,CAAC,GAAG,MAAM,CAAC,oBAAoB,CAAA;AACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE;IACxE,OAAO;IACP,aAAa;IACb,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,CAAA;IAChD,CAAC;QACC,aAAa;QACb,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,sBAAsB,CAAC,IAAI,oBAAoB;YACnE,aAAa;YACb,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,6BAA6B,CAAC,CAAA;CACrD;AAED,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;IAClB,IAAI,CAAC,EAAE;QACL,OAAO,CAAC,CAAA;KACT;SAAM;QACL,IAAI,QAAQ,GAAG,CAAC,CAAA;QAChB,OAAO,UAAU,QAAa;YAC5B,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;YACnC,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAA;YAC1D,IAAI,EAAE,GAAG,MAAM,CAAC,UAAU,CAAC;gBACzB,2BAA2B;gBAC3B,QAAQ,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAA;YACjC,CAAC,EAAE,UAAU,CAAC,CAAA;YACd,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAA;YAChC,OAAO,EAAE,CAAA;QACX,CAAC,CAAA;KACF;AACH,CAAC,CAAC,EAAE,CAAA;AAEJ,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;IAClB,IAAI,CAAC,EAAE;QACL,OAAO,CAAC,CAAA;KACT;SAAM;QACL,OAAO,UAAU,EAAU;YACzB,YAAY,CAAC,EAAE,CAAC,CAAA;QAClB,CAAC,CAAA;KACF;AACH,CAAC,CAAC,EAAE,CAAA","sourcesContent":["/**\n * @author GuangHui\n * @description requestAnimationFrame\n */\n\nconst vendors = ['webkit', 'moz']\nlet r = window.requestAnimationFrame\nlet c = window.cancelAnimationFrame\nfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n  // 统一前缀\n  // @ts-ignore\n  r = window[vendors[x] + 'RequestAnimationFrame']\n  c =\n    // @ts-ignore\n    window[vendors[x] + 'CancelAnimationFrame'] || // Webkit中此取消方法的名字变了\n    // @ts-ignore\n    window[vendors[x] + 'CancelRequestAnimationFrame']\n}\n\nexport const raf = (function () {\n  if (r) {\n    return r\n  } else {\n    let lastTime = 0\n    return function (callback: any) {\n      var currTime = new Date().getTime()\n      var timeToCall = Math.max(0, 16.7 - (currTime - lastTime))\n      var id = window.setTimeout(function () {\n        // eslint-disable-next-line\n        callback(currTime + timeToCall)\n      }, timeToCall)\n      lastTime = currTime + timeToCall\n      return id\n    }\n  }\n})()\n\nexport const caf = (function () {\n  if (c) {\n    return c\n  } else {\n    return function (id: number) {\n      clearTimeout(id)\n    }\n  }\n})()\n"]}